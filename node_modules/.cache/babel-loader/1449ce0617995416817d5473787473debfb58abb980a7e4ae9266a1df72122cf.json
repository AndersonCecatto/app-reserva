{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport GenericMethods from '@/mixins/GenericMethods';\nimport LoadComponent from '../LoadComponent.vue';\nimport AlertComponent from '../AlertComponent.vue';\nimport DialogPersistentComponent from '../Field/DialogPersistentComponent.vue';\nimport RequestMethods from '@/mixins/RequestMethods';\nexport default {\n  components: {\n    LoadComponent,\n    AlertComponent,\n    DialogPersistentComponent\n  },\n  name: 'CadastroPeriodoComponent.vue',\n  mixins: [GenericMethods, RequestMethods],\n  data: () => ({\n    headers: [{\n      text: 'Código',\n      width: \"150\",\n      value: 'Id'\n    }, {\n      text: 'Descricao',\n      width: \"750\",\n      value: 'Descricao'\n    }, {\n      text: 'Ativo',\n      value: 'Ativo'\n    }, {\n      text: 'Ações',\n      value: 'actions',\n      sortable: false,\n      align: \"center\"\n    }],\n    periodos: [],\n    ativo: 'Sim',\n    descricao: null,\n    acao: null,\n    itemEnvio: null,\n    sortBy: 'Id',\n    sortDesc: true\n  }),\n  methods: {\n    novo() {\n      this.acao = 'Cadastrar';\n      this.descricao = null;\n      this.dialog = !this.dialog;\n    },\n    requestBuscarPeriodoPorEmpresaId() {\n      this.loader = !this.loader;\n      this.RequestGet('Periodo/' + this.dadosUsuario.EmpresaId, retorno => this.RetornoPeriodo(retorno), error => this.$emit('response', {\n        success: false,\n        response: error\n      }), () => this.loader = !this.loader);\n    },\n    RetornoPeriodo(retorno) {\n      retorno.data.forEach(element => {\n        this.periodos.push({\n          Id: element.id,\n          Descricao: element.descricao,\n          Ativo: element.ativo == true ? 'Sim' : 'Não'\n        });\n      });\n    },\n    retornoDialog(retorno) {\n      if (retorno.acao == 'Cadastrar' && retorno.success) this.requestCadastrarPeriodo();else if (retorno.acao == 'Editar' && retorno.success) this.requestEditarPeriodo(retorno.response);\n      this.dialog = !this.dialog;\n    },\n    requestCadastrarPeriodo() {\n      this.loader = !this.loader;\n      this.periodos = [];\n      this.RequestPost('Periodo', {\n        Descricao: this.descricao,\n        EmpresaId: this.dadosUsuario.EmpresaId,\n        Ativo: this.ativo == 'Sim'\n      }, retorno => {\n        this.EnableAlert(\"Concluido com sucesso.\", \"success\");\n        window.scrollTo(0, 0);\n      }, error => this.RetornoErro(error), () => {\n        this.loader = !this.loader;\n        this.requestBuscarPeriodoPorEmpresaId();\n      });\n    },\n    deletarPeriodo(item) {\n      this.loader = !this.loader;\n      this.periodos = [];\n      this.RequestDelete('Periodo/' + item.Id, retorno => {\n        this.EnableAlert(\"Concluido com sucesso.\", \"success\");\n        window.scrollTo(0, 0);\n      }, error => this.RetornoErro(error), () => {\n        this.loader = !this.loader;\n        this.requestBuscarPeriodoPorEmpresaId();\n      });\n    },\n    editarPeriodo(item) {\n      this.acao = 'Editar';\n      this.itemEnvio = item;\n      this.descricao = item.Descricao;\n      this.ativo = item.ativo;\n      this.dialog = !this.dialog;\n    },\n    requestEditarPeriodo(item) {\n      this.loader = !this.loader;\n      this.periodos = [];\n      this.RequestPut('Periodo', {\n        Id: item.Id,\n        Descricao: this.descricao,\n        EmpresaId: this.dadosUsuario.EmpresaId\n      }, retorno => {\n        this.EnableAlert(\"Concluido com sucesso.\", \"success\");\n        window.scrollTo(0, 0);\n      }, error => this.RetornoErro(error), () => {\n        this.loader = !this.loader;\n        this.requestBuscarPeriodoPorEmpresaId();\n      });\n    }\n  },\n  created() {\n    this.requestBuscarPeriodoPorEmpresaId();\n  },\n  props: {\n    dadosUsuario: Object\n  }\n};","map":{"version":3,"mappings":";AA8EA;AACA;AACA;AACA;AACA;AAEA;EACAA;IAAAC;IAAAC;IAAAC;EAAA;EAEAC;EACAC;EACAC;IACAC,UACA;MAAAC;MAAAC;MAAAC;IAAA,GACA;MAAAF;MAAAC;MAAAC;IAAA,GACA;MAAAF;MAAAE;IAAA,GACA;MAAAF;MAAAE;MAAAC;MAAAC;IAAA,EACA;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;EACA;EAEAC;IACAC;MACA;MACA;MAEA;IACA;IACAC;MAEA;MAEA,0DACAC,yCACAC;QAAAC;QAAAC;MAAA,IACA;IACA;IAEAC;MACAJ;QACA;UACAK;UACAC;UACAC;QACA;MACA;IACA;IAEAC;MAEA,oDACA,oCACA,iDACA;MAEA;IACA;IAEAC;MAEA;MAEA;MAEA,4BACA;QACAH;QACAI;QACAH;MACA,GACAP;QACA;QACAW;MACA,GACAV,kCACA;QACA;QACA;MACA;IACA;IAEAW;MAEA;MAEA;MAEA,yCACAZ;QACA;QACAW;MACA,GACAV,kCACA;QACA;QACA;MACA;IACA;IAEAY;MACA;MACA;MACA;MACA;MAEA;IACA;IAEAC;MACA;MAEA;MAEA,2BACA;QACAT;QACAC;QACAI;MACA,GACAV;QACA;QACAW;MACA,GACAV,kCACA;QACA;QACA;MACA;IACA;EACA;EAEAc;IACA;EACA;EAEAC;IACAC;EACA;AACA","names":["components","LoadComponent","AlertComponent","DialogPersistentComponent","name","mixins","data","headers","text","width","value","sortable","align","periodos","ativo","descricao","acao","itemEnvio","sortBy","sortDesc","methods","novo","requestBuscarPeriodoPorEmpresaId","retorno","error","success","response","RetornoPeriodo","Id","Descricao","Ativo","retornoDialog","requestCadastrarPeriodo","EmpresaId","window","deletarPeriodo","editarPeriodo","requestEditarPeriodo","created","props","dadosUsuario"],"sourceRoot":"src/components/Empresa","sources":["CadastroPeriodoComponent.vue"],"sourcesContent":["<template>\r\n    <v-card class=\"pb-3\">\r\n        <alert-component :texto-alerta=\"textoAlerta\" :tipo='tipoAlerta' v-if=\"alerta == true\"/>\r\n        <load-component :Ativo=\"loader\"/>\r\n        <v-card-title>\r\n            Periodo\r\n            <v-spacer/>\r\n            <v-btn\r\n                class=\"text-right mr-3\"\r\n                outlined\r\n                large\r\n                right\r\n                color=\"primary\"\r\n                @click=\"novo()\"\r\n                >\r\n                Novo\r\n            </v-btn>\r\n        </v-card-title>\r\n        <v-card-text>\r\n        <v-data-table\r\n            :headers=\"headers\"\r\n            :items=\"periodos\"\r\n            :footer-props=\"{\r\n                'items-per-page-text':'Linhas por pagina',\r\n                'items-per-page-options': [5, 10, 20]\r\n            }\"\r\n            :header-props=\"{\r\n                'sortByText': 'Ordenar'\r\n            }\"\r\n            :sort-desc.sync=\"sortDesc\"\r\n            :sort-by.sync=\"sortBy\"\r\n        >\r\n            <template v-slot:item.actions=\"{ item }\">\r\n                <v-icon\r\n                    midium\r\n                    class=\"mr-3\"\r\n                    @click=\"editarPeriodo(item)\"\r\n                >\r\n                    mdi-pencil\r\n                </v-icon>\r\n                <v-icon\r\n                    class=\"mr-3\"\r\n                    midium\r\n                    @click=\"deletarPeriodo(item)\"\r\n                >\r\n                    mdi-delete\r\n                </v-icon>\r\n            </template>\r\n        </v-data-table>\r\n        <load-component :Ativo=\"loader\"/>\r\n        <dialog-persistent-component \r\n            :item=\"itemEnvio\" \r\n            titulo=\"Cadastrar Periodo\" \r\n            :dialog=\"dialog\" \r\n            tamanho=\"400\" \r\n            @response=\"retornoDialog\" \r\n            :acao=\"acao\">\r\n                <v-form>\r\n                    <v-text-field\r\n                        v-model=\"descricao\"\r\n                        label=\"Descrição\"\r\n                        prepend-icon=\"mdi-text-box-edit\"\r\n                        color=\"green\"\r\n                    />\r\n                    <v-select\r\n                        v-model=\"ativo\"\r\n                        :items=\"SimNao\"\r\n                        label=\"Ativo\"\r\n                        prepend-icon=\"mdi-list-box\"\r\n                        color=\"green\"\r\n                    />\r\n                </v-form>\r\n        </dialog-persistent-component>\r\n        </v-card-text>\r\n    </v-card>\r\n</template>\r\n<script>\r\n\r\nimport GenericMethods from '@/mixins/GenericMethods'\r\nimport LoadComponent from '../LoadComponent.vue'\r\nimport AlertComponent from '../AlertComponent.vue';\r\nimport DialogPersistentComponent from '../Field/DialogPersistentComponent.vue';\r\nimport RequestMethods from '@/mixins/RequestMethods';\r\n\r\nexport default {\r\n    components: { LoadComponent, AlertComponent, DialogPersistentComponent },\r\n\r\n    name: 'CadastroPeriodoComponent.vue',\r\n    mixins: [GenericMethods, RequestMethods],\r\n    data: () => ({\r\n        headers: [\r\n            { text: 'Código', width: \"150\", value: 'Id', },\r\n            { text: 'Descricao', width: \"750\", value: 'Descricao', },\r\n            { text: 'Ativo', value: 'Ativo', },\r\n            { text: 'Ações', value: 'actions', sortable: false, align: \"center\" }\r\n        ],\r\n        periodos: [],\r\n        ativo: 'Sim',\r\n        descricao: null,\r\n        acao: null,\r\n        itemEnvio: null,\r\n        sortBy: 'Id',\r\n        sortDesc: true,\r\n    }),\r\n\r\n    methods: {\r\n        novo() {\r\n            this.acao = 'Cadastrar'\r\n            this.descricao = null\r\n\r\n            this.dialog = !this.dialog\r\n        },\r\n        requestBuscarPeriodoPorEmpresaId() {\r\n\r\n            this.loader = !this.loader;\r\n\r\n            this.RequestGet('Periodo/'+this.dadosUsuario.EmpresaId,\r\n            (retorno) => this.RetornoPeriodo(retorno),\r\n            (error) => this.$emit('response', { success: false, response: error }),\r\n            () => (this.loader = !this.loader))\r\n        },\r\n\r\n        RetornoPeriodo(retorno) {\r\n            retorno.data.forEach(element => {\r\n                this.periodos.push({\r\n                        Id: element.id,\r\n                        Descricao: element.descricao,\r\n                        Ativo: element.ativo == true ? 'Sim' : 'Não'\r\n                })\r\n            });\r\n        },\r\n        \r\n        retornoDialog(retorno) {\r\n\r\n            if (retorno.acao == 'Cadastrar' && retorno.success)\r\n                this.requestCadastrarPeriodo()\r\n            else if (retorno.acao == 'Editar' && retorno.success)\r\n                this.requestEditarPeriodo(retorno.response)\r\n\r\n            this.dialog = !this.dialog\r\n        },\r\n\r\n        requestCadastrarPeriodo() {\r\n\r\n            this.loader = !this.loader;\r\n\r\n            this.periodos = []\r\n\r\n            this.RequestPost('Periodo',\r\n            {\r\n                Descricao: this.descricao,\r\n                EmpresaId: this.dadosUsuario.EmpresaId,\r\n                Ativo: this.ativo == 'Sim'\r\n            },\r\n            (retorno) => {\r\n                this.EnableAlert(\"Concluido com sucesso.\", \"success\")\r\n                window.scrollTo(0,0);\r\n            }, \r\n            (error) => this.RetornoErro(error),\r\n            () => {\r\n                this.loader = !this.loader\r\n                this.requestBuscarPeriodoPorEmpresaId()\r\n            })\r\n        },\r\n\r\n        deletarPeriodo(item) {\r\n\r\n            this.loader = !this.loader;\r\n\r\n            this.periodos = []\r\n\r\n            this.RequestDelete('Periodo/'+item.Id,\r\n            (retorno) => {\r\n                this.EnableAlert(\"Concluido com sucesso.\", \"success\")\r\n                window.scrollTo(0,0);\r\n            }, \r\n            (error) => this.RetornoErro(error),\r\n            () => {\r\n                this.loader = !this.loader\r\n                this.requestBuscarPeriodoPorEmpresaId()\r\n            })\r\n        },\r\n\r\n        editarPeriodo(item) {\r\n            this.acao = 'Editar'\r\n            this.itemEnvio = item\r\n            this.descricao = item.Descricao\r\n            this.ativo = item.ativo\r\n\r\n            this.dialog = !this.dialog\r\n        },\r\n\r\n        requestEditarPeriodo(item) {\r\n            this.loader = !this.loader;\r\n\r\n            this.periodos = []\r\n\r\n            this.RequestPut('Periodo',\r\n            {\r\n                Id: item.Id,\r\n                Descricao: this.descricao,\r\n                EmpresaId: this.dadosUsuario.EmpresaId,\r\n            },\r\n            (retorno) => {\r\n                this.EnableAlert(\"Concluido com sucesso.\", \"success\")\r\n                window.scrollTo(0,0);\r\n            }, \r\n            (error) => this.RetornoErro(error),\r\n            () => {\r\n                this.loader = !this.loader\r\n                this.requestBuscarPeriodoPorEmpresaId()\r\n            })\r\n        }\r\n    },\r\n    \r\n    created() {\r\n        this.requestBuscarPeriodoPorEmpresaId()\r\n    },\r\n\r\n    props: {\r\n        dadosUsuario: Object\r\n    }\r\n}\r\n</script>\r\n<style>\r\n    \r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}