{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport GenericMethods from '@/mixins/GenericMethods';\nimport AlertComponent from './AlertComponent.vue';\nimport LoadComponent from './LoadComponent.vue';\nimport RequestMethods from '@/mixins/RequestMethods';\nimport DialogPersistentComponent from './Field/DialogPersistentComponent.vue';\nexport default {\n  components: {\n    AlertComponent,\n    LoadComponent,\n    DialogPersistentComponent\n  },\n  mixins: [GenericMethods, RequestMethods],\n  name: 'ServicoComponent',\n  data: () => ({\n    headers: [{\n      text: 'Código',\n      width: \"150\",\n      value: 'Id'\n    }, {\n      text: 'Descricao',\n      width: \"750\",\n      value: 'Descricao'\n    }, {\n      text: 'Valor',\n      value: 'Valor'\n    }, {\n      text: 'Ativo',\n      value: 'Ativo'\n    }, {\n      text: 'Ações',\n      value: 'actions',\n      sortable: false,\n      align: \"center\"\n    }],\n    servicos: [],\n    descricao: null,\n    ativo: 'Sim',\n    valor: null,\n    acao: null,\n    itemEnvio: null,\n    sortBy: 'Id',\n    sortDesc: true\n  }),\n  methods: {\n    novo() {\n      this.acao = 'Cadastrar';\n      this.descricao = null;\n      this.dialog = !this.dialog;\n    },\n    retornoDialog(retorno) {\n      if (retorno.acao == 'Cadastrar' && retorno.success) this.requestCadastrarServico();else if (retorno.acao == 'Editar' && retorno.success) this.requestEditarPeriodo(retorno.response);\n      this.dialog = !this.dialog;\n    },\n    requestBuscarServicoPorEmpresaId() {\n      this.loader = !this.loader;\n      this.RequestGet('Servico/' + this.dadosUsuario.EmpresaId, retorno => this.RetornoServico(retorno), error => this.$emit('response', {\n        success: false,\n        response: error\n      }), () => this.loader = !this.loader);\n    },\n    RetornoServico(retorno) {\n      retorno.data.forEach(element => {\n        this.servicos.push({\n          Id: element.id,\n          Descricao: element.descricao,\n          Valor: element.valor,\n          Ativo: element.ativo ? 'Sim' : 'Não'\n        });\n      });\n    },\n    requestCadastrarServico() {\n      this.loader = !this.loader;\n      this.servicos = [];\n      this.RequestPost('Servico', {\n        Descricao: this.descricao,\n        EmpresaId: this.dadosUsuario.EmpresaId,\n        Valor: this.valor,\n        Ativo: this.ativo == 'Sim'\n      }, retorno => {\n        this.EnableAlert(\"Concluido com sucesso.\", \"success\");\n      }, error => this.RetornoErro(error), () => {\n        this.loader = !this.loader;\n        this.requestBuscarServicoPorEmpresaId();\n      });\n    },\n    requestEditarServico(item) {\n      this.loader = !this.loader;\n      this.servicos = [];\n      this.RequestPut('Servico', {\n        Id: item.Id,\n        Descricao: this.descricao,\n        Valor: this.valor,\n        Ativo: this.ativo == 'Sim',\n        EmpresaId: this.dadosUsuario.EmpresaId\n      }, retorno => {\n        this.EnableAlert(\"Concluido com sucesso.\", \"success\");\n      }, error => this.RetornoErro(error), () => {\n        this.loader = !this.loader;\n        this.requestBuscarServicoPorEmpresaId();\n      });\n    },\n    deletarServico(item) {\n      this.loader = !this.loader;\n      this.periodos = [];\n      this.RequestDelete('Servico/' + item.Id, retorno => {\n        if (retorno.data.dados == null) this.EnableAlert(retorno.data.mensagem, \"info\");else this.EnableAlert(\"Concluido com sucesso.\", \"success\");\n      }, error => this.RetornoErro(error), () => {\n        this.loader = !this.loader;\n        this.requestBuscarServicoPorEmpresaId();\n      });\n    },\n    editarServico(item) {\n      this.acao = 'Editar';\n      this.itemEnvio = item;\n      this.descricao = item.Descricao;\n      this.valor = item.valor;\n      this.ativo = item.Ativo;\n      this.dialog = !this.dialog;\n    }\n  },\n  created() {\n    this.requestBuscarServicoPorEmpresaId();\n  },\n  props: {\n    dadosUsuario: Object\n  }\n};","map":{"version":3,"mappings":";AAqFA;AACA;AACA;AACA;AACA;AAEA;EACAA;IAAAC;IAAAC;IAAAC;EAAA;EACAC;EACAC;EACAC;IACAC,UACA;MAAAC;MAAAC;MAAAC;IAAA,GACA;MAAAF;MAAAC;MAAAC;IAAA,GACA;MAAAF;MAAAE;IAAA,GACA;MAAAF;MAAAE;IAAA,GACA;MAAAF;MAAAE;MAAAC;MAAAC;IAAA,EACA;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;EACA;EAEAC;IACAC;MACA;MACA;MAEA;IACA;IAEAC;MAEA,oDACA,oCACA,iDACA;MAEA;IACA;IAEAC;MAEA;MAEA,0DACAC,yCACAC;QAAAC;QAAAC;MAAA,IACA;IACA;IAEAC;MACAJ;QACA;UACAK;UACAC;UACAC;UACAC;QACA;MACA;IACA;IAEAC;MAEA;MAEA;MAEA,4BACA;QACAH;QACAI;QACAH;QACAC;MACA,GACAR;QACA;MACA,GACAC,kCACA;QACA;QACA;MACA;IAEA;IAEAU;MACA;MAEA;MAEA,2BACA;QACAN;QACAC;QACAC;QACAC;QACAE;MACA,GACAV;QACA;MACA,GACAC,kCACA;QACA;QACA;MACA;IACA;IAEAW;MAEA;MAEA;MAEA,yCACAZ;QACA,gCACA,qDAEA;MACA,GACAC,kCACA;QACA;QACA;MACA;IACA;IAEAY;MACA;MACA;MACA;MACA;MACA;MAEA;IACA;EACA;EAEAC;IACA;EACA;EAEAC;IACAC;EACA;AACA","names":["components","AlertComponent","LoadComponent","DialogPersistentComponent","mixins","name","data","headers","text","width","value","sortable","align","servicos","descricao","ativo","valor","acao","itemEnvio","sortBy","sortDesc","methods","novo","retornoDialog","requestBuscarServicoPorEmpresaId","retorno","error","success","response","RetornoServico","Id","Descricao","Valor","Ativo","requestCadastrarServico","EmpresaId","requestEditarServico","deletarServico","editarServico","created","props","dadosUsuario"],"sourceRoot":"src/components","sources":["ServicoComponent.vue"],"sourcesContent":["<template>\r\n    <v-card>\r\n        <alert-component :texto-alerta=\"textoAlerta\" :tipo='tipoAlerta' v-if=\"alerta == true\"/>\r\n        <load-component :Ativo=\"loader\"/>\r\n        <v-card-title>\r\n            Servicos\r\n            <v-spacer/>\r\n            <v-btn\r\n                class=\"text-right mr-3\"\r\n                outlined\r\n                large\r\n                right\r\n                color=\"primary\"\r\n                @click=\"novo()\"\r\n                >\r\n                <v-icon left> mdi-plus </v-icon>\r\n                Novo\r\n            </v-btn>\r\n        </v-card-title>\r\n        <v-card-text>\r\n            <v-data-table\r\n                :headers=\"headers\"\r\n                :items=\"servicos\"\r\n                :footer-props=\"{\r\n                'items-per-page-text':'Linhas por pagina',\r\n                'items-per-page-options': [5, 10, 20]\r\n                }\"\r\n                :header-props=\"{\r\n                    'sortByText': 'Ordenar'\r\n                }\"\r\n                :sort-desc.sync=\"sortDesc\"\r\n                :sort-by.sync=\"sortBy\"\r\n            >\r\n                <template v-slot:item.actions=\"{ item }\">\r\n                    <v-icon\r\n                        midium\r\n                        class=\"mr-3\"\r\n                        @click=\"editarServico(item)\"\r\n                    >\r\n                        mdi-pencil\r\n                    </v-icon>\r\n                    <v-icon\r\n                        class=\"mr-3\"\r\n                        midium\r\n                        @click=\"deletarServico(item)\"\r\n                    >\r\n                        mdi-delete\r\n                    </v-icon>\r\n                </template>\r\n            </v-data-table>\r\n            <dialog-persistent-component\r\n                :dialog=\"dialog\" \r\n                titulo=\"Cadastrar Servico\"\r\n                tamanho=\"400\"\r\n                @response=\"retornoDialog\"\r\n                :acao=\"acao\"\r\n                :item=\"itemEnvio\" \r\n            >\r\n                <v-form>\r\n                    <v-text-field\r\n                        v-model=\"descricao\"\r\n                        label=\"Descrição\"\r\n                        prepend-icon=\"mdi-text-box-edit\"\r\n                        color=\"green\"\r\n                    />\r\n                    <v-text-field\r\n                        v-model=\"valor\"\r\n                        label=\"Valor\"\r\n                        prepend-icon=\"mdi-text-box-edit\"\r\n                        color=\"green\"\r\n                    />\r\n                    <v-select\r\n                        v-model=\"ativo\"\r\n                        :items=\"SimNao\"\r\n                        label=\"Ativo\"\r\n                        prepend-icon=\"mdi-list-box\"\r\n                        color=\"green\"\r\n                    />\r\n                </v-form>\r\n            </dialog-persistent-component>\r\n        </v-card-text>\r\n    </v-card>\r\n</template>\r\n<script>\r\n\r\nimport GenericMethods from '@/mixins/GenericMethods'\r\nimport AlertComponent from './AlertComponent.vue'\r\nimport LoadComponent from './LoadComponent.vue'\r\nimport RequestMethods from '@/mixins/RequestMethods'\r\nimport DialogPersistentComponent from './Field/DialogPersistentComponent.vue'\r\n\r\nexport default {\r\n    components: { AlertComponent, LoadComponent, DialogPersistentComponent },\r\n    mixins: [GenericMethods, RequestMethods],\r\n    name: 'ServicoComponent',\r\n    data: () =>({\r\n        headers: [\r\n            { text: 'Código', width: \"150\", value: 'Id', },\r\n            { text: 'Descricao', width: \"750\", value: 'Descricao', },\r\n            { text: 'Valor', value: 'Valor', },\r\n            { text: 'Ativo', value: 'Ativo', },\r\n            { text: 'Ações', value: 'actions', sortable: false, align: \"center\" }\r\n        ],\r\n        servicos: [],\r\n        descricao: null,\r\n        ativo: 'Sim',\r\n        valor: null,\r\n        acao: null,\r\n        itemEnvio: null,\r\n        sortBy: 'Id',\r\n        sortDesc: true,\r\n    }),\r\n\r\n    methods: {\r\n        novo() {\r\n            this.acao = 'Cadastrar'\r\n            this.descricao = null\r\n\r\n            this.dialog = !this.dialog\r\n        },\r\n\r\n        retornoDialog(retorno) {\r\n\r\n            if (retorno.acao == 'Cadastrar' && retorno.success)\r\n                this.requestCadastrarServico()\r\n            else if (retorno.acao == 'Editar' && retorno.success)\r\n                this.requestEditarPeriodo(retorno.response)\r\n\r\n            this.dialog = !this.dialog\r\n        },\r\n\r\n        requestBuscarServicoPorEmpresaId() {\r\n\r\n            this.loader = !this.loader;\r\n\r\n            this.RequestGet('Servico/'+this.dadosUsuario.EmpresaId,\r\n            (retorno) => this.RetornoServico(retorno),\r\n            (error) => this.$emit('response', { success: false, response: error }),\r\n            () => (this.loader = !this.loader))\r\n        },\r\n\r\n        RetornoServico(retorno) {\r\n            retorno.data.forEach(element => {\r\n                this.servicos.push({\r\n                        Id: element.id,\r\n                        Descricao: element.descricao,\r\n                        Valor: element.valor,\r\n                        Ativo: element.ativo ? 'Sim' : 'Não'\r\n                })\r\n            });\r\n        },\r\n\r\n        requestCadastrarServico() {\r\n\r\n            this.loader = !this.loader;\r\n\r\n            this.servicos = []\r\n\r\n            this.RequestPost('Servico',\r\n            {\r\n                Descricao: this.descricao,\r\n                EmpresaId: this.dadosUsuario.EmpresaId,\r\n                Valor: this.valor,\r\n                Ativo: this.ativo == 'Sim'\r\n            },\r\n            (retorno) => {\r\n                this.EnableAlert(\"Concluido com sucesso.\", \"success\")\r\n            }, \r\n            (error) => this.RetornoErro(error),\r\n            () => {\r\n                this.loader = !this.loader\r\n                this.requestBuscarServicoPorEmpresaId()\r\n            })\r\n\r\n        },\r\n\r\n        requestEditarServico(item) {\r\n            this.loader = !this.loader;\r\n\r\n            this.servicos = []\r\n\r\n            this.RequestPut('Servico',\r\n            {\r\n                Id: item.Id,\r\n                Descricao: this.descricao,\r\n                Valor: this.valor,\r\n                Ativo: this.ativo == 'Sim',\r\n                EmpresaId: this.dadosUsuario.EmpresaId,\r\n            },\r\n            (retorno) => {\r\n                this.EnableAlert(\"Concluido com sucesso.\", \"success\")\r\n            }, \r\n            (error) => this.RetornoErro(error),\r\n            () => {\r\n                this.loader = !this.loader\r\n                this.requestBuscarServicoPorEmpresaId()\r\n            })\r\n        },\r\n\r\n        deletarServico(item) {\r\n\r\n            this.loader = !this.loader;\r\n\r\n            this.periodos = []\r\n\r\n            this.RequestDelete('Servico/'+item.Id,\r\n            (retorno) => {\r\n                if (retorno.data.dados == null)\r\n                    this.EnableAlert(retorno.data.mensagem, \"info\")\r\n                else\r\n                    this.EnableAlert(\"Concluido com sucesso.\", \"success\")\r\n            }, \r\n            (error) => this.RetornoErro(error),\r\n            () => {\r\n                this.loader = !this.loader\r\n                this.requestBuscarServicoPorEmpresaId()\r\n            })\r\n        },\r\n\r\n        editarServico(item) {\r\n            this.acao = 'Editar'\r\n            this.itemEnvio = item\r\n            this.descricao = item.Descricao\r\n            this.valor = item.valor\r\n            this.ativo = item.Ativo\r\n\r\n            this.dialog = !this.dialog\r\n        }\r\n    },\r\n\r\n    created() {\r\n        this.requestBuscarServicoPorEmpresaId()\r\n    },\r\n\r\n    props: {\r\n        dadosUsuario: Object\r\n    }\r\n}\r\n</script>\r\n<style>\r\n    \r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}