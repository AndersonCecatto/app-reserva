{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport api from '@/services/api';\nimport LoadComponent from '../LoadComponent.vue';\nimport TimeDialogFieldComponent from '../Field/TimeDialogFieldComponent.vue';\nimport GenericMethods from '@/mixins/GenericMethods';\nimport RequestMethods from '@/mixins/RequestMethods';\nexport default {\n  components: {\n    LoadComponent,\n    TimeDialogFieldComponent\n  },\n  name: 'CadastroConfiguracoesEmpresaComponent',\n  mixins: [GenericMethods, RequestMethods],\n  data: () => ({\n    loader: false,\n    modal1: false,\n    modal2: false,\n    items: ['Sim', 'Não'],\n    localReservaPorPessoas: null,\n    localTimeInicial: null,\n    localTimeFinal: null,\n    localReservaPorPeriodo: null,\n    localReservaPorMesa: null,\n    localQuantidadeMesas: null,\n    localQuantidadePessoas: null,\n    localDiasAtendimento: [],\n    diasAtendimentoSemana: ['Segunda-Feira', 'Terça-Feira', 'Quarta-Feira', 'Quinta-Feira', 'Sexta-Feira', 'Sabado', 'Domindo'],\n    requiredPeopleRules: [v => v != null || 'Campo Obrigatório.'\n    // v => v != 0 && this.checkReservaPorPessoa() || 'Campo Obrigatório.'\n    ],\n\n    requiredTableRules: [v => v != null || 'Campo Obrigatório.'\n    // v => v != 0 && this.checkReservaPorMesa() || 'Campo Obrigatório.'\n    ]\n  }),\n\n  methods: {\n    checkReservaPorMesa() {\n      return this.localReservaPorMesa == 'Sim';\n    },\n    checkReservaPorPessoa() {\n      return this.localReservaPorPessoas == 'Sim';\n    },\n    change(event) {\n      this.$emit('reservaPorPeriodo', event);\n    },\n    Salvar() {\n      if (!this.$refs.form.validate()) return;\n      this.loader = !this.loader;\n      this.RequestPut('ConfiguracoesEmpresa', {\n        Id: this.retornoConfiguracoes.ConfiguracoesEmpresaId,\n        HorarioInicio: this.parseTime(this.FormatDate(new Date().toISOString().substring(0, 10)), this.localTimeInicial),\n        //new Date(new Date().toISOString().substring(0,10) + ' ' + this.localTimeInicial+':00.000Z').toISOString(),\n        HorarioFim: this.parseTime(this.FormatDate(new Date().toISOString().substring(0, 10)), this.localTimeFinal),\n        //new Date(new Date().toISOString().substring(0,10) + ' ' + this.localTimeFinal+':00.000Z').toISOString(),\n        EhPorMesas: this.localReservaPorMesa == \"Sim\",\n        QuantidadeMesas: this.localReservaPorMesa != \"Sim\" ? 0 : this.localQuantidadeMesas,\n        EhPorPessoas: this.localReservaPorPessoas == \"Sim\",\n        QuantidadePessoas: this.localReservaPorPessoas != \"Sim\" ? 0 : this.localQuantidadePessoas,\n        TempoReservaMinutos: 0,\n        EhPorPeriodo: this.localReservaPorPeriodo == \"Sim\",\n        utilizaServico: this.localUtilizaServico == \"Sim\",\n        DiasAtendimento: this.selecionarDiasAtendimentoBanco()\n      }, retorno => this.$emit('response', {\n        success: true,\n        response: retorno\n      }), error => this.$emit('response', {\n        success: false,\n        response: error\n      }), () => this.loader = !this.loader);\n    },\n    retornoTimeInicial(retorno) {\n      this.localTimeInicial = retorno;\n    },\n    retornoTimeFinal(retorno) {\n      this.localTimeFinal = retorno;\n    },\n    selecionarDiasAtendimentoBanco() {\n      var retornoBanco = '';\n      this.localDiasAtendimento.forEach(dias => {\n        switch (dias) {\n          case 'Segunda-Feira':\n            retornoBanco += '0;';\n            break;\n          case 'Terça-Feira':\n            retornoBanco += '1;';\n            break;\n          case 'Quarta-Feira':\n            retornoBanco += '2;';\n            break;\n          case 'Quinta-Feira':\n            retornoBanco += '3;';\n            break;\n          case 'Sexta-Feira':\n            retornoBanco += '4;';\n            break;\n          case 'Sabado':\n            retornoBanco += '5;';\n            break;\n          case 'Domindo':\n            retornoBanco += '6;';\n            break;\n          default:\n            break;\n        }\n      });\n      return retornoBanco.slice(0, -1);\n    },\n    selecionarDiasAtendimento(diasAtendimento) {\n      diasAtendimento.split(';').forEach(dias => {\n        switch (dias) {\n          case '0':\n            this.localDiasAtendimento.push('Segunda-Feira');\n            break;\n          case '1':\n            this.localDiasAtendimento.push('Terça-Feira');\n            break;\n          case '2':\n            this.localDiasAtendimento.push('Quarta-Feira');\n            break;\n          case '3':\n            this.localDiasAtendimento.push('Quinta-Feira');\n            break;\n          case '4':\n            this.localDiasAtendimento.push('Sexta-Feira');\n            break;\n          case '5':\n            this.localDiasAtendimento.push('Sabado');\n            break;\n          case '6':\n            this.localDiasAtendimento.push('Domindo');\n            break;\n          default:\n            break;\n        }\n      });\n    }\n  },\n  created() {\n    this.localTimeInicial = this.retornoConfiguracoes.TimeInicial;\n    this.localTimeFinal = this.retornoConfiguracoes.TimeFinal;\n    this.localReservaPorPeriodo = this.retornoConfiguracoes.ReservaPorPeriodo;\n    this.localReservaPorMesa = this.retornoConfiguracoes.ReservaPorMesa;\n    this.localQuantidadeMesas = this.retornoConfiguracoes.QuantidadeMesas;\n    this.localReservaPorPessoas = this.retornoConfiguracoes.ReservaPorPessoas;\n    this.localQuantidadePessoas = this.retornoConfiguracoes.QuantidadePessoas;\n    this.localUtilizaServico = this.retornoConfiguracoes.UtilizaServico;\n    this.selecionarDiasAtendimento(this.retornoConfiguracoes.DiasAtendimento);\n  },\n  watch: {\n    localReservaPorMesa(newValue) {\n      if (newValue != 'Sim') this.localQuantidadeMesas = '';\n    },\n    localReservaPorPessoas(newValue) {\n      if (newValue != 'Sim') this.localQuantidadePessoas = '';\n    },\n    localReservaPorPeriodo(newValue) {}\n  },\n  props: {\n    retornoConfiguracoes: Object\n  }\n};","map":{"version":3,"mappings":";AA6FA;AACA;AACA;AACA;AACA;AAEA;EACAA;IAAAC;IAAAC;EAAA;EAEAC;EAEAC;EAEAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC,wBACA,gCACA,gCACA,mCACA;IACAC,sBACAC;IACA;IAAA,CACA;;IACAC,qBACAD;IACA;IAAA;EAEA;;EAEAE;IACAC;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;IACA;IACAC;MAEA,iCACA;MAEA;MAEA,wCACA;QACAC;QACAC;QAAA;QACAC;QAAA;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA,GACAC;QAAAC;QAAAC;MAAA,IACAC;QAAAF;QAAAC;MAAA,IACA;IACA;IAEAE;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MAEA;MACA;QAEA;UACA;YACAC;YACA;UACA;YACAA;YACA;UACA;YACAA;YACA;UACA;YACAA;YACA;UACA;YACAA;YACA;UACA;YACAA;YACA;UACA;YACAA;YACA;UACA;YACA;QAAA;MAEA;MAEA;IACA;IAEAC;MACAC;QAEA;UACA;YACA;YACA;UACA;YACA;YACA;UACA;YACA;YACA;UACA;YACA;YACA;UACA;YACA;YACA;UACA;YACA;YACA;UACA;YACA;YACA;UACA;YACA;QAAA;MAEA;IACA;EACA;EACAC;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;EAEAC;IACAnC;MACA,uBACA;IACA;IACAJ;MACA,uBACA;IACA;IACAG,kCAEA;EACA;EAEAqC;IACAC;EACA;AACA","names":["components","LoadComponent","TimeDialogFieldComponent","name","mixins","data","loader","modal1","modal2","items","localReservaPorPessoas","localTimeInicial","localTimeFinal","localReservaPorPeriodo","localReservaPorMesa","localQuantidadeMesas","localQuantidadePessoas","localDiasAtendimento","diasAtendimentoSemana","requiredPeopleRules","v","requiredTableRules","methods","checkReservaPorMesa","checkReservaPorPessoa","change","Salvar","Id","HorarioInicio","HorarioFim","EhPorMesas","QuantidadeMesas","EhPorPessoas","QuantidadePessoas","TempoReservaMinutos","EhPorPeriodo","utilizaServico","DiasAtendimento","retorno","success","response","error","retornoTimeInicial","retornoTimeFinal","selecionarDiasAtendimentoBanco","retornoBanco","selecionarDiasAtendimento","diasAtendimento","created","watch","props","retornoConfiguracoes"],"sourceRoot":"src/components/Empresa","sources":["CadastroConfiguracoesEmpresaComponent.vue"],"sourcesContent":["<template>\r\n    <v-form \r\n        ref=\"form\" \r\n        lazy-validation\r\n        class=\"px-4 mt-3\">\r\n        <time-dialog-field-component \r\n            @retornoTime=\"retornoTimeInicial\" \r\n            titulo=\"Horário Inicio Reservas\"\r\n            :recebe-time=\"localTimeInicial\"/>\r\n        <time-dialog-field-component \r\n            @retornoTime=\"retornoTimeFinal\" \r\n            titulo=\"Horário Fim Reservas\"\r\n            :recebe-time=\"localTimeFinal\"/>\r\n        <v-select\r\n            v-model=\"localDiasAtendimento\"\r\n            :items=\"diasAtendimentoSemana\"\r\n            attach\r\n            chips\r\n            label=\"Dias de Atendimento\"\r\n            color=\"green\"\r\n            prepend-icon=\"mdi-list-box\"\r\n            multiple\r\n            :rules=\"required\"\r\n        ></v-select>\r\n        <v-select\r\n            v-model=\"localReservaPorPeriodo\"\r\n            :items=\"items\"\r\n            label=\"Reserva por Periodo\"\r\n            prepend-icon=\"mdi-list-box\"\r\n            color=\"green\"\r\n            @change=\"change\"\r\n            :rules=\"required\"\r\n        ></v-select>\r\n        <v-select\r\n            v-model=\"localUtilizaServico\"\r\n            :items=\"items\"\r\n            label=\"Utiliza Servicos\"\r\n            prepend-icon=\"mdi-list-box\"\r\n            color=\"green\"\r\n            :rules=\"required\"\r\n        ></v-select>\r\n        <v-select\r\n            v-model=\"localReservaPorMesa\"\r\n            :items=\"items\"\r\n            label=\"Reserva por mesas\"\r\n            prepend-icon=\"mdi-list-box\"\r\n            color=\"green\"\r\n        ></v-select>\r\n        <v-text-field\r\n            v-model=\"localQuantidadeMesas\"\r\n            prepend-icon=\"mdi-account-plus\"\r\n            label=\"Quantidade Mesas\"\r\n            required\r\n            type=\"number\"\r\n            pattern=\"\\d*\"\r\n            :rules=\"requiredTableRules\"\r\n            color=\"green\"\r\n            :disabled=\"localReservaPorMesa == 'Não'\"\r\n        />\r\n        <v-select\r\n            v-model=\"localReservaPorPessoas\"\r\n            :items=\"items\"\r\n            label=\"Reserva por Pessoas\"\r\n            prepend-icon=\"mdi-list-box\"\r\n            color=\"green\"\r\n        ></v-select>\r\n        <v-text-field\r\n            v-model=\"localQuantidadePessoas\"\r\n            prepend-icon=\"mdi-account-plus\"\r\n            label=\"Quantidade Pessoas\"\r\n            required\r\n            type=\"number\"\r\n            pattern=\"\\d*\"\r\n            :rules=\"requiredPeopleRules\"\r\n            color=\"green\"\r\n            :disabled=\"localReservaPorPessoas == 'Não'\"\r\n        />\r\n        <v-row class=\"px-3 py-7\">\r\n            <v-btn\r\n                outlined\r\n                large\r\n                block\r\n                color=\"green\"\r\n                @click=\"Salvar()\"\r\n                >\r\n                Confirmar\r\n            </v-btn>\r\n        </v-row>\r\n        <load-component :Ativo=\"loader\"/>\r\n    </v-form>\r\n</template>\r\n<script>\r\n\r\nimport api from '@/services/api';\r\nimport LoadComponent from '../LoadComponent.vue';\r\nimport TimeDialogFieldComponent from '../Field/TimeDialogFieldComponent.vue';\r\nimport GenericMethods from '@/mixins/GenericMethods';\r\nimport RequestMethods from '@/mixins/RequestMethods';\r\n\r\nexport default {\r\n    components: { LoadComponent, TimeDialogFieldComponent },\r\n\r\n    name: 'CadastroConfiguracoesEmpresaComponent',\r\n\r\n    mixins: [GenericMethods, RequestMethods],\r\n\r\n    data: () => ({\r\n        loader: false,\r\n        modal1: false,\r\n        modal2: false,\r\n        items: ['Sim', 'Não'],\r\n        localReservaPorPessoas: null,\r\n        localTimeInicial: null,\r\n        localTimeFinal: null,\r\n        localReservaPorPeriodo: null,\r\n        localReservaPorMesa: null,\r\n        localQuantidadeMesas: null,\r\n        localQuantidadePessoas: null,\r\n        localDiasAtendimento: [],\r\n        diasAtendimentoSemana: [\r\n            'Segunda-Feira', 'Terça-Feira',\r\n            'Quarta-Feira', 'Quinta-Feira',\r\n            'Sexta-Feira', 'Sabado', 'Domindo'\r\n        ],\r\n        requiredPeopleRules: [\r\n            v => v != null  || 'Campo Obrigatório.',\r\n            // v => v != 0 && this.checkReservaPorPessoa() || 'Campo Obrigatório.'\r\n        ],\r\n        requiredTableRules: [\r\n            v => v != null || 'Campo Obrigatório.', \r\n            // v => v != 0 && this.checkReservaPorMesa() || 'Campo Obrigatório.'\r\n        ],\r\n    }),\r\n\r\n    methods: {\r\n        checkReservaPorMesa() {\r\n            return this.localReservaPorMesa == 'Sim'\r\n        },\r\n\r\n        checkReservaPorPessoa() {\r\n            return this.localReservaPorPessoas == 'Sim'\r\n        },\r\n\r\n        change(event) {\r\n            this.$emit('reservaPorPeriodo', event)\r\n        },\r\n        Salvar(){\r\n            \r\n            if (!this.$refs.form.validate()) \r\n                return \r\n\r\n            this.loader = !this.loader;\r\n\r\n            this.RequestPut('ConfiguracoesEmpresa',\r\n            {\r\n                Id: this.retornoConfiguracoes.ConfiguracoesEmpresaId,\r\n                HorarioInicio: this.parseTime(this.FormatDate(new Date().toISOString().substring(0,10)), this.localTimeInicial), //new Date(new Date().toISOString().substring(0,10) + ' ' + this.localTimeInicial+':00.000Z').toISOString(),\r\n                HorarioFim: this.parseTime(this.FormatDate(new Date().toISOString().substring(0,10)), this.localTimeFinal),//new Date(new Date().toISOString().substring(0,10) + ' ' + this.localTimeFinal+':00.000Z').toISOString(),\r\n                EhPorMesas: this.localReservaPorMesa == \"Sim\",\r\n                QuantidadeMesas: this.localReservaPorMesa != \"Sim\" ? 0 : this.localQuantidadeMesas,\r\n                EhPorPessoas: this.localReservaPorPessoas == \"Sim\",\r\n                QuantidadePessoas: this.localReservaPorPessoas != \"Sim\" ? 0 : this.localQuantidadePessoas,\r\n                TempoReservaMinutos: 0,\r\n                EhPorPeriodo: this.localReservaPorPeriodo == \"Sim\",\r\n                utilizaServico: this.localUtilizaServico == \"Sim\",\r\n                DiasAtendimento: this.selecionarDiasAtendimentoBanco()\r\n            },\r\n            (retorno) => this.$emit('response', { success: true, response: retorno }),\r\n            (error) => this.$emit('response', { success: false, response: error }),\r\n            () => (this.loader = !this.loader))\r\n        },\r\n        \r\n        retornoTimeInicial(retorno) {\r\n            this.localTimeInicial = retorno\r\n        },\r\n\r\n        retornoTimeFinal(retorno) {\r\n            this.localTimeFinal = retorno\r\n        },\r\n\r\n        selecionarDiasAtendimentoBanco() {\r\n\r\n            var retornoBanco = ''\r\n            this.localDiasAtendimento.forEach(dias => {\r\n                \r\n                switch (dias) {\r\n                    case 'Segunda-Feira':\r\n                        retornoBanco += '0;'\r\n                        break;\r\n                    case 'Terça-Feira':\r\n                        retornoBanco += '1;'\r\n                        break;\r\n                    case 'Quarta-Feira':\r\n                        retornoBanco += '2;'\r\n                        break;\r\n                    case 'Quinta-Feira':\r\n                        retornoBanco += '3;'\r\n                        break;\r\n                    case 'Sexta-Feira':\r\n                        retornoBanco +='4;'\r\n                        break;\r\n                    case 'Sabado':\r\n                        retornoBanco +='5;'\r\n                        break;\r\n                    case 'Domindo':\r\n                        retornoBanco +='6;'\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            })\r\n\r\n            return retornoBanco.slice(0, -1)\r\n        },\r\n\r\n        selecionarDiasAtendimento(diasAtendimento) {\r\n            diasAtendimento.split(';').forEach(dias => {\r\n                \r\n                switch (dias) {\r\n                    case '0':\r\n                        this.localDiasAtendimento.push('Segunda-Feira')\r\n                        break;\r\n                    case '1':\r\n                        this.localDiasAtendimento.push('Terça-Feira')\r\n                        break;\r\n                    case '2':\r\n                        this.localDiasAtendimento.push('Quarta-Feira')\r\n                        break;\r\n                    case '3':\r\n                        this.localDiasAtendimento.push('Quinta-Feira')\r\n                        break;\r\n                    case '4':\r\n                        this.localDiasAtendimento.push('Sexta-Feira')\r\n                        break;\r\n                    case '5':\r\n                        this.localDiasAtendimento.push('Sabado')\r\n                        break;\r\n                    case '6':\r\n                        this.localDiasAtendimento.push('Domindo')\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n    },\r\n    created() {\r\n\r\n        this.localTimeInicial = this.retornoConfiguracoes.TimeInicial\r\n        this.localTimeFinal = this.retornoConfiguracoes.TimeFinal\r\n        this.localReservaPorPeriodo = this.retornoConfiguracoes.ReservaPorPeriodo\r\n        this.localReservaPorMesa = this.retornoConfiguracoes.ReservaPorMesa\r\n        this.localQuantidadeMesas = this.retornoConfiguracoes.QuantidadeMesas\r\n        this.localReservaPorPessoas = this.retornoConfiguracoes.ReservaPorPessoas\r\n        this.localQuantidadePessoas = this.retornoConfiguracoes.QuantidadePessoas\r\n        this.localUtilizaServico = this.retornoConfiguracoes.UtilizaServico\r\n        this.selecionarDiasAtendimento(this.retornoConfiguracoes.DiasAtendimento)\r\n    },\r\n\r\n    watch: {\r\n        localReservaPorMesa(newValue) {\r\n            if (newValue != 'Sim')\r\n                this.localQuantidadeMesas = ''\r\n        },\r\n        localReservaPorPessoas(newValue) {\r\n            if (newValue != 'Sim')\r\n                this.localQuantidadePessoas = ''\r\n        },\r\n        localReservaPorPeriodo(newValue) {\r\n\r\n        },\r\n    },\r\n\r\n    props: {\r\n        retornoConfiguracoes: Object\r\n    }\r\n}\r\n</script>\r\n<style>\r\n    \r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}