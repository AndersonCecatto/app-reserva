{"ast":null,"code":"import RequestMethods from '@/mixins/RequestMethods';\nimport GenericMethods from '@/mixins/GenericMethods';\nimport AlertComponent from '../AlertComponent.vue';\nimport LoadComponent from '../LoadComponent.vue';\nimport DialogPersistentComponent from '../Field/DialogPersistentComponent.vue';\nexport default {\n  components: {\n    AlertComponent,\n    LoadComponent,\n    DialogPersistentComponent\n  },\n  name: 'CadastroUsuarioComponent',\n  mixins: [RequestMethods, GenericMethods],\n  data: () => ({\n    localNomeCompleto: null,\n    localTelefone: null,\n    localUsuario: null,\n    localSenha: null,\n    localRepetirSenha: null,\n    localAtivo: 'Sim',\n    localFuncao: null,\n    localAdm: 'Não',\n    localDadosUsuario: null,\n    show1: false\n  }),\n  methods: {\n    retornoDialog(retorno) {\n      if (retorno.success) {\n        this.requisicaoEditar();\n      }\n      this.dialog = !this.dialog;\n    },\n    limparCampos() {\n      if (this.clean) {\n        this.localNomeCompleto = null;\n        this.localUsuario = null;\n        this.localSenha = null;\n        this.localTelefone = null;\n        this.localAtivo = 'Sim';\n        this.localFuncao = null;\n        this.localAdm = 'Não';\n      }\n    },\n    Salvar() {\n      if (!this.$refs.form.validate()) return;\n      this.loader = !this.loader;\n      this.RequestPost('Usuario/InserirCliente', {\n        Nome: this.localNomeCompleto,\n        DataCadastro: new Date().toISOString(),\n        Login: this.localUsuario,\n        Senha: this.localSenha,\n        Telefone: this.localTelefone,\n        FuncionarioId: this.dadosUsuario?.FuncionarioId,\n        EmpresaId: this.dadosUsuario?.EmpresaId,\n        Ativo: this.localAtivo == 'Sim' ?? true,\n        Funcao: this.localFuncao,\n        Administrador: this.localAdm == 'Sim' ?? false,\n        Edicao: false\n      }, retorno => this.RetornoUsuario(retorno), error => this.RetornoErro(error), () => this.loader = !this.loader);\n    },\n    Editar() {\n      if (!this.$refs.form.validate()) return;\n      this.dialog = !this.dialog;\n    },\n    requisicaoEditar() {\n      this.loader = !this.loader;\n      this.RequestPut('Usuario', {\n        Id: this.dadosUsuario.Id,\n        Nome: this.localNomeCompleto,\n        DataCadastro: this.parseDate(this.dadosUsuario.DataCadastro),\n        Login: this.localUsuario,\n        Senha: this.localSenha,\n        Telefone: this.localTelefone,\n        FuncionarioId: this.dadosUsuario.FuncionarioId,\n        Ativo: this.localAtivo == 'Sim' ?? true,\n        Funcao: this.localFuncao,\n        Administrador: this.localAdm == 'Sim' ?? false,\n        Edicao: true\n      }, retorno => this.RetornoEdicao(retorno), error => this.RetornoErro(error), () => this.loader = !this.loader);\n    },\n    RetornoEdicao(retorno) {\n      this.$emit('response', {\n        success: retorno,\n        response: this.item,\n        acao: this.acao\n      });\n    },\n    RetornoUsuario(retorno) {\n      this.responseDialog(true);\n    },\n    responseDialog(retorno) {\n      this.limparCampos();\n      this.$emit('response', {\n        success: retorno,\n        response: this.item,\n        acao: this.acao\n      });\n    },\n    atribuirValores(val) {\n      this.localNomeCompleto = val.Nome;\n      this.localUsuario = val.Login;\n      this.localSenha = val.Senha;\n      this.localTelefone = val.Telefone;\n      this.localAtivo = val.Ativo ?? 'Sim';\n      this.localFuncao = val.Funcao;\n      this.localAdm = val.AdministradorUsuario ?? 'Não';\n    }\n  },\n  watch: {\n    salvar(newValue) {\n      if (this.acao == \"Editar\") this.requisicaoEditar();else this.Salvar();\n    },\n    cancelar(newValue) {\n      this.limparCampos();\n    },\n    editar(val) {\n      this.Editar();\n    },\n    localDadosUsuario(val) {\n      debugger;\n      if (val != null && this.acao == \"Editar\") this.atribuirValores(val);else this.limparCampos();\n    },\n    dadosUsuario(val) {\n      debugger;\n      if (val != null && this.acao == \"Editar\") this.atribuirValores(val);else this.limparCampos();\n    }\n  },\n  created() {\n    debugger;\n    this.localDadosUsuario = this.dadosUsuario;\n  },\n  props: {\n    salvar: Boolean,\n    editar: Boolean,\n    cancelar: Boolean,\n    acao: String,\n    clean: Boolean,\n    dadosUsuario: Object\n  }\n};","map":{"version":3,"mappings":"AA0FA;AACA;AACA;AACA;AACA;AAEA;EACAA;IAAAC;IAAAC;IAAAC;EAAA;EACAC;EACAC;EACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACAC;MAEA;QACA;MACA;MAEA;IACA;IAEAC;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IAEAC;MAEA,iCACA;MAEA;MAEA,2CACA;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA,GACAC,yCACAC,kCACA;IACA;IAEAC;MAEA,iCACA;MAEA;IACA;IAEAC;MAEA;MAEA,2BACA;QACAC;QACAf;QACAC;QACAC;QACAC;QACAC;QACAC;QACAE;QACAC;QACAC;QACAC;MACA,GACAC,wCACAC,kCACA;IACA;IAEAI;MACA;QAAAC;QAAAC;QAAAC;MAAA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;MACA;QAAAJ;QAAAC;QAAAC;MAAA;IACA;IAEAG;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;EAEA;EACAC;IACAC;MAEA,2BACA,6BAEA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAhC;MACA;MACA,0CACA,+BAEA;IACA;IACAiC;MACA;MACA,0CACA,+BAEA;IACA;EACA;EAEAC;IACA;IACA;EACA;EAEAC;IACAL;IACAE;IACAD;IACAN;IACAW;IACAH;EACA;AACA","names":["components","AlertComponent","LoadComponent","DialogPersistentComponent","name","mixins","data","localNomeCompleto","localTelefone","localUsuario","localSenha","localRepetirSenha","localAtivo","localFuncao","localAdm","localDadosUsuario","show1","methods","retornoDialog","limparCampos","Salvar","Nome","DataCadastro","Login","Senha","Telefone","FuncionarioId","EmpresaId","Ativo","Funcao","Administrador","Edicao","retorno","error","Editar","requisicaoEditar","Id","RetornoEdicao","success","response","acao","RetornoUsuario","responseDialog","atribuirValores","watch","salvar","cancelar","editar","dadosUsuario","created","props","clean"],"sourceRoot":"src/components/Usuario","sources":["CadastroUsuarioComponent.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <v-form\r\n            ref=\"form\" \r\n            lazy-validation\r\n            class=\"px-4 mt-3\">\r\n            <alert-component :texto-alerta=\"textoAlerta\" :tipo='tipoAlerta' v-if=\"alerta == true\"/>\r\n            <v-text-field\r\n                v-model=\"localNomeCompleto\"\r\n                label=\"Nome Completo\"\r\n                :rules=\"required\"\r\n                color=\"green\"\r\n                required\r\n                prepend-icon=\"mdi-text-box-edit\"\r\n            />\r\n            <v-text-field\r\n                v-model=\"localTelefone\"\r\n                label=\"Telefone\"\r\n                type=\"tel\"\r\n                pattern=\"\\d*\"\r\n                required\r\n                color=\"green\"\r\n                :rules=\"required\"\r\n                prepend-icon=\"mdi-text-box-edit\"\r\n                v-mask=\"maskTelefone\"\r\n            />\r\n            <v-text-field\r\n                v-model=\"localUsuario\"\r\n                label=\"Email\"\r\n                type=\"email\"\r\n                :rules=\"emailRules\"\r\n                color=\"green\"\r\n                required\r\n                prepend-icon=\"mdi-text-box-edit\"\r\n            />\r\n            <v-text-field\r\n                v-model=\"localSenha\"\r\n                :append-icon=\"show1 ? 'mdi-eye' : 'mdi-eye-off'\"\r\n                :rules=\"required\"\r\n                :type=\"show1 ? 'text' : 'password'\"\r\n                label=\"Senha\"\r\n                color=\"green\"\r\n                counter\r\n                required\r\n                @click:append=\"show1 = !show1\"\r\n                prepend-icon=\"mdi-text-box-edit\"\r\n            />\r\n            <v-text-field\r\n                v-model=\"localFuncao\"\r\n                label=\"Função\"\r\n                :rules=\"required\"\r\n                color=\"green\"\r\n                required\r\n                prepend-icon=\"mdi-text-box-edit\"\r\n                v-if=\"dadosUsuario != null && dadosUsuario.Adm\"\r\n            />\r\n            <v-select\r\n                v-model=\"localAtivo\"\r\n                :items=\"SimNao\"\r\n                label=\"Ativo\"\r\n                prepend-icon=\"mdi-list-box\"\r\n                color=\"green\"\r\n                :rules=\"required\"\r\n                v-if=\"dadosUsuario != null && dadosUsuario.Adm\"\r\n            />\r\n            <v-select\r\n                v-model=\"localAdm\"\r\n                :items=\"SimNao\"\r\n                label=\"Administrador\"\r\n                prepend-icon=\"mdi-list-box\"\r\n                color=\"green\"\r\n                :rules=\"required\"\r\n                v-if=\"dadosUsuario != null && dadosUsuario.Adm\"\r\n            />\r\n        </v-form>\r\n        <load-component :Ativo=\"loader\"/>\r\n        <dialog-persistent-component\r\n            titulo=\"Atenção\"\r\n            :dialog=\"dialog\"\r\n            tamanho=\"400\"\r\n            @response=\"retornoDialog\"\r\n        >\r\n            <div class=\"text-h6\">\r\n                Seja necessário efetuar o logout para salvar as informações.\r\n            </div>\r\n        </dialog-persistent-component>\r\n    </div>\r\n</template>\r\n<script>\r\n\r\nimport RequestMethods from '@/mixins/RequestMethods'\r\nimport GenericMethods from '@/mixins/GenericMethods'\r\nimport AlertComponent from '../AlertComponent.vue'\r\nimport LoadComponent from '../LoadComponent.vue'\r\nimport DialogPersistentComponent from '../Field/DialogPersistentComponent.vue'\r\n\r\nexport default {\r\n  components: { AlertComponent, LoadComponent, DialogPersistentComponent },\r\n    name: 'CadastroUsuarioComponent',\r\n    mixins: [RequestMethods, GenericMethods],\r\n    data: () => ({\r\n        localNomeCompleto: null,\r\n        localTelefone: null,\r\n        localUsuario: null,\r\n        localSenha: null,\r\n        localRepetirSenha: null,\r\n        localAtivo: 'Sim',\r\n        localFuncao: null,\r\n        localAdm: 'Não',\r\n        localDadosUsuario: null,\r\n        show1: false\r\n    }), \r\n    methods: {\r\n        retornoDialog(retorno) {\r\n            \r\n            if (retorno.success) {\r\n                this.requisicaoEditar()\r\n            }\r\n\r\n            this.dialog = !this.dialog\r\n        },\r\n\r\n        limparCampos() {\r\n            if (this.clean) {\r\n                this.localNomeCompleto = null\r\n                this.localUsuario = null\r\n                this.localSenha = null\r\n                this.localTelefone = null\r\n                this.localAtivo = 'Sim'\r\n                this.localFuncao = null\r\n                this.localAdm = 'Não'\r\n            }\r\n        },\r\n\r\n        Salvar() {\r\n\r\n            if (!this.$refs.form.validate()) \r\n                return \r\n\r\n            this.loader = !this.loader;\r\n\r\n            this.RequestPost('Usuario/InserirCliente',\r\n            {\r\n                Nome: this.localNomeCompleto,\r\n                DataCadastro: new Date().toISOString(),\r\n                Login: this.localUsuario,\r\n                Senha: this.localSenha,\r\n                Telefone: this.localTelefone,\r\n                FuncionarioId: this.dadosUsuario?.FuncionarioId,\r\n                EmpresaId: this.dadosUsuario?.EmpresaId,\r\n                Ativo: this.localAtivo == 'Sim' ?? true,\r\n                Funcao: this.localFuncao,\r\n                Administrador: this.localAdm == 'Sim' ?? false,\r\n                Edicao: false\r\n            },\r\n            (retorno) => this.RetornoUsuario(retorno), \r\n            (error) => this.RetornoErro(error),\r\n            () => (this.loader = !this.loader))\r\n        },\r\n\r\n        Editar() {\r\n\r\n            if (!this.$refs.form.validate()) \r\n                return\r\n\r\n            this.dialog = !this.dialog\r\n        },\r\n\r\n        requisicaoEditar() {\r\n\r\n            this.loader = !this.loader;\r\n\r\n            this.RequestPut('Usuario',\r\n            {\r\n                Id: this.dadosUsuario.Id,\r\n                Nome: this.localNomeCompleto,\r\n                DataCadastro: this.parseDate(this.dadosUsuario.DataCadastro),\r\n                Login: this.localUsuario,\r\n                Senha: this.localSenha,\r\n                Telefone: this.localTelefone,\r\n                FuncionarioId: this.dadosUsuario.FuncionarioId,\r\n                Ativo: this.localAtivo == 'Sim' ?? true,\r\n                Funcao: this.localFuncao,\r\n                Administrador: this.localAdm == 'Sim' ?? false,\r\n                Edicao: true\r\n            },\r\n                (retorno) => this.RetornoEdicao(retorno), \r\n                (error) => this.RetornoErro(error),\r\n                () => (this.loader = !this.loader))\r\n        },\r\n\r\n        RetornoEdicao(retorno) {\r\n            this.$emit('response', { success: retorno, response: this.item, acao: this.acao})\r\n        },\r\n\r\n        RetornoUsuario(retorno) {\r\n            this.responseDialog(true)\r\n        },\r\n\r\n        responseDialog(retorno) {\r\n            this.limparCampos()\r\n            this.$emit('response', { success: retorno, response: this.item, acao: this.acao})\r\n        },\r\n\r\n        atribuirValores(val) {\r\n            \r\n            this.localNomeCompleto = val.Nome\r\n            this.localUsuario = val.Login\r\n            this.localSenha = val.Senha\r\n            this.localTelefone = val.Telefone\r\n            this.localAtivo = val.Ativo ?? 'Sim'\r\n            this.localFuncao = val.Funcao\r\n            this.localAdm = val.AdministradorUsuario ?? 'Não'\r\n        }\r\n        \r\n    },\r\n    watch: {\r\n        salvar(newValue) {\r\n            \r\n            if (this.acao == \"Editar\")\r\n                this.requisicaoEditar()\r\n            else\r\n                this.Salvar()\r\n        },\r\n        cancelar(newValue) {\r\n            this.limparCampos()\r\n        },\r\n        editar(val) {\r\n            this.Editar()\r\n        },\r\n        localDadosUsuario(val) {\r\n            debugger\r\n            if (val != null && this.acao == \"Editar\")\r\n                this.atribuirValores(val)\r\n            else\r\n                this.limparCampos()\r\n        },\r\n        dadosUsuario(val) {\r\n            debugger\r\n            if (val != null && this.acao == \"Editar\")\r\n                this.atribuirValores(val)\r\n            else\r\n                this.limparCampos()\r\n        }\r\n    },\r\n\r\n    created() {\r\n        debugger\r\n        this.localDadosUsuario = this.dadosUsuario\r\n    },\r\n\r\n    props: {\r\n        salvar: Boolean,\r\n        editar: Boolean,\r\n        cancelar: Boolean,\r\n        acao: String,\r\n        clean: Boolean,\r\n        dadosUsuario: Object\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n    .v-alert {\r\n        top: 10px !important\r\n    }\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}