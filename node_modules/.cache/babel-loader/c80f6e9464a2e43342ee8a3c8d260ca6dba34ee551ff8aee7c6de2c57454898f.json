{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport GenericMethods from '@/mixins/GenericMethods';\nimport LoadComponent from '../LoadComponent.vue';\nimport AlertComponent from '../AlertComponent.vue';\nimport api from '@/services/api';\nimport DialogPersistentComponent from '../Field/DialogPersistentComponent.vue';\nexport default {\n  components: {\n    LoadComponent,\n    AlertComponent,\n    DialogPersistentComponent\n  },\n  name: 'CadastroPeriodoComponent.vue',\n  mixins: [GenericMethods],\n  data: () => ({\n    headers: [{\n      text: 'Código',\n      width: \"150\",\n      value: 'Id'\n    }, {\n      text: 'Descricao',\n      width: \"750\",\n      value: 'Descricao'\n    }, {\n      text: 'Ações',\n      value: 'actions',\n      sortable: false,\n      align: \"center\"\n    }],\n    periodos: [],\n    descricao: null,\n    acao: null\n  }),\n  methods: {\n    novo() {\n      this.acao = 'Cadastrar';\n      this.dialog = !this.dialog;\n    },\n    requestBuscarPeriodoPorEmpresaId() {\n      this.loader = !this.loader;\n      api.get('Periodo/' + 5).then(response => {\n        response.data.forEach(element => {\n          this.periodos.push({\n            Id: element.id,\n            Descricao: element.descricao\n          });\n        });\n      }).catch(error => {\n        if (error.response.status == 401) {\n          this.EnableAlert(\"Usuario não Autorizado\", \"error\");\n          return;\n        }\n        this.EnableAlert(error.message, \"error\");\n        console.log(error);\n      }).finally(() => this.loader = !this.loader);\n    },\n    retornoDialog(retorno) {\n      debugger;\n      if (retorno.acao == 'Cadastrar' && retorno.success) this.requestCadastrarPeriodo();\n      this.dialog = !this.dialog;\n    },\n    requestCadastrarPeriodo() {\n      this.loader = !this.loader;\n      this.periodos = [];\n      api.post('Periodo', {\n        Descricao: this.descricao,\n        EmpresaId: 5\n      }).then(response => {\n        this.EnableAlert(\"Concluido com sucesso.\", \"success\");\n        console.log(response);\n      }).catch(error => {\n        this.EnableAlert(error.message, \"error\");\n        window.scrollTo(0, 0);\n        console.log(error);\n      }).finally(() => {\n        this.loader = !this.loader;\n        this.requestBuscarPeriodoPorEmpresaId();\n      });\n    },\n    deletarPeriodo(item) {\n      this.loader = !this.loader;\n      this.periodos = [];\n      api.delete('Periodo/' + item.Id).then(response => {\n        this.EnableAlert(\"Concluido com sucesso.\", \"success\");\n        console.log(response);\n      }).catch(error => {\n        this.EnableAlert(error.message, \"error\");\n        window.scrollTo(0, 0);\n        console.log(error);\n      }).finally(() => {\n        this.loader = !this.loader;\n        this.requestBuscarPeriodoPorEmpresaId();\n      });\n    },\n    EditarPeriodo(item) {\n      this.loader = !this.loader;\n      this.periodos = [];\n      api.post('Periodo', {\n        Id: item.Id,\n        Descricao: this.descricao\n      }).then(response => {\n        this.EnableAlert(\"Concluido com sucesso.\", \"success\");\n        console.log(response);\n      }).catch(error => {\n        this.EnableAlert(error.message, \"error\");\n        window.scrollTo(0, 0);\n        console.log(error);\n      }).finally(() => {\n        this.loader = !this.loader;\n        this.requestBuscarPeriodoPorEmpresaId();\n      });\n    }\n  },\n  created() {\n    this.requestBuscarPeriodoPorEmpresaId();\n  }\n};","map":{"version":3,"mappings":";AA2DA;AACA;AACA;AACA;AACA;AAEA;EACAA;IAAAC;IAAAC;IAAAC;EAAA;EAEAC;EACAC;EACAC;IACAC,UACA;MAAAC;MAAAC;MAAAC;IAAA,GACA;MAAAF;MAAAC;MAAAC;IAAA,GACA;MAAAF;MAAAE;MAAAC;MAAAC;IAAA,EACA;IACAC;IACAC;IACAC;EACA;EAEAC;IACAC;MACA;MAEA;IACA;IACAC;MAEA;MAEAC,wBACAC;QACAC;UACA;YACAC;YACAC;UACA;QACA;MACA,GACAC;QACA;UACA;UACA;QACA;QAEA;QACAC;MACA,GACAC;IACA;IAEAC;MACA;MAEA,oDACA;MAEA;IACA;IAEAC;MAEA;MAEA;MAEAT,oBACA;QACAI;QACAM;MACA,GACAT;QACA;QACAK;MACA,GACAD;QACA;QACAM;QACAL;MACA,GACAC;QACA;QACA;MACA;IACA;IAEAK;MAEA;MAEA;MAEAZ,iCACAC;QACA;QACAK;MACA,GACAD;QACA;QACAM;QACAL;MACA,GACAC;QACA;QACA;MACA;IACA;IAEAM;MACA;MAEA;MAEAb,oBACA;QACAG;QACAC;MACA,GACAH;QACA;QACAK;MACA,GACAD;QACA;QACAM;QACAL;MACA,GACAC;QACA;QACA;MACA;IACA;EACA;EAEAO;IACA;EACA;AACA","names":["components","LoadComponent","AlertComponent","DialogPersistentComponent","name","mixins","data","headers","text","width","value","sortable","align","periodos","descricao","acao","methods","novo","requestBuscarPeriodoPorEmpresaId","api","then","response","Id","Descricao","catch","console","finally","retornoDialog","requestCadastrarPeriodo","EmpresaId","window","deletarPeriodo","EditarPeriodo","created"],"sourceRoot":"src/components/Empresa","sources":["CadastroPeriodoComponent.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <alert-component :texto-alerta=\"textoAlerta\" :tipo='tipoAlerta' v-if=\"alerta == true\"/>\r\n        <v-row>\r\n            <v-col cols=\"12\" class=\"text-right\">\r\n                <v-btn\r\n                    class=\"text-right\"\r\n                    outlined\r\n                    large\r\n                    right\r\n                    color=\"primary\"\r\n                    @click=\"dialog = !dialog, descricao = null\"\r\n                    >\r\n                    Novo\r\n                </v-btn>\r\n            </v-col>\r\n        </v-row>\r\n        <v-data-table\r\n            :headers=\"headers\"\r\n            :items=\"periodos\"\r\n            :footer-props=\"{\r\n                'items-per-page-text':'Linhas por pagina',\r\n                'items-per-page-options': [5, 10, 20]\r\n            }\"\r\n            :header-props=\"{\r\n                'sortByText': 'Ordenar'\r\n            }\"\r\n        >\r\n            <template v-slot:item.actions=\"{ item }\">\r\n                <v-icon\r\n                    midium\r\n                    class=\"mr-3\"\r\n                    @click=\"novo()\"\r\n                >\r\n                    mdi-pencil\r\n                </v-icon>\r\n                <v-icon\r\n                    class=\"mr-3\"\r\n                    midium\r\n                    @click=\"deletarPeriodo(item)\"\r\n                >\r\n                    mdi-delete\r\n                </v-icon>\r\n            </template>\r\n        </v-data-table>\r\n        <load-component :Ativo=\"loader\"/>\r\n        <dialog-persistent-component titulo=\"Cadastrar Periodo\" :dialog=\"dialog\" tamanho=\"400\" @response=\"retornoDialog\" :acao=\"acao\">\r\n            <v-form>\r\n                <v-text-field\r\n                    v-model=\"descricao\"\r\n                    label=\"Descrição\"\r\n                    prepend-icon=\"mdi-clock-time-four-outline\"\r\n                />\r\n            </v-form>\r\n        </dialog-persistent-component>\r\n    </div>\r\n</template>\r\n<script>\r\n\r\nimport GenericMethods from '@/mixins/GenericMethods'\r\nimport LoadComponent from '../LoadComponent.vue'\r\nimport AlertComponent from '../AlertComponent.vue';\r\nimport api from '@/services/api';\r\nimport DialogPersistentComponent from '../Field/DialogPersistentComponent.vue';\r\n\r\nexport default {\r\n    components: { LoadComponent, AlertComponent, DialogPersistentComponent },\r\n\r\n    name: 'CadastroPeriodoComponent.vue',\r\n    mixins: [GenericMethods],\r\n    data: () => ({\r\n        headers: [\r\n            { text: 'Código', width: \"150\", value: 'Id', },\r\n            { text: 'Descricao', width: \"750\", value: 'Descricao', },\r\n            { text: 'Ações', value: 'actions', sortable: false, align: \"center\" }\r\n        ],\r\n        periodos: [],\r\n        descricao: null,\r\n        acao: null\r\n    }),\r\n\r\n    methods: {\r\n        novo() {\r\n            this.acao = 'Cadastrar'\r\n\r\n            this.dialog = !this.dialog\r\n        },\r\n        requestBuscarPeriodoPorEmpresaId() {\r\n\r\n            this.loader = !this.loader;\r\n\r\n            api.get('Periodo/'+5)\r\n            .then(response => {\r\n                response.data.forEach(element => {\r\n                    this.periodos.push({\r\n                            Id: element.id,\r\n                            Descricao: element.descricao\r\n                    })\r\n                });\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status == 401) {\r\n                    this.EnableAlert(\"Usuario não Autorizado\", \"error\")\r\n                    return\r\n                }\r\n\r\n                this.EnableAlert(error.message, \"error\")\r\n                console.log(error)\r\n            })\r\n            .finally(() => (this.loader = !this.loader))\r\n        },\r\n        \r\n        retornoDialog(retorno) {\r\n            debugger\r\n\r\n            if (retorno.acao == 'Cadastrar' && retorno.success)\r\n                this.requestCadastrarPeriodo()\r\n\r\n            this.dialog = !this.dialog\r\n        },\r\n\r\n        requestCadastrarPeriodo() {\r\n\r\n            this.loader = !this.loader;\r\n\r\n            this.periodos = []\r\n\r\n            api.post('Periodo', \r\n            {\r\n                Descricao: this.descricao,\r\n                EmpresaId: 5,\r\n            })\r\n            .then(response => {\r\n                this.EnableAlert(\"Concluido com sucesso.\", \"success\")\r\n                console.log(response)\r\n            })\r\n            .catch(error => {\r\n                this.EnableAlert(error.message, \"error\")\r\n                window.scrollTo(0,0);\r\n                console.log(error)\r\n            })\r\n            .finally(() => {\r\n                this.loader = !this.loader\r\n                this.requestBuscarPeriodoPorEmpresaId()\r\n            })\r\n        },\r\n\r\n        deletarPeriodo(item) {\r\n\r\n            this.loader = !this.loader;\r\n\r\n            this.periodos = []\r\n\r\n            api.delete('Periodo/'+item.Id)\r\n            .then(response => {\r\n                this.EnableAlert(\"Concluido com sucesso.\", \"success\")\r\n                console.log(response)\r\n            })\r\n            .catch(error => {\r\n                this.EnableAlert(error.message, \"error\")\r\n                window.scrollTo(0,0);\r\n                console.log(error)\r\n            })\r\n            .finally(() => {\r\n                this.loader = !this.loader\r\n                this.requestBuscarPeriodoPorEmpresaId()\r\n            })\r\n        },\r\n\r\n        EditarPeriodo(item) {\r\n            this.loader = !this.loader;\r\n\r\n            this.periodos = []\r\n\r\n            api.post('Periodo',\r\n            {\r\n                Id: item.Id,\r\n                Descricao: this.descricao\r\n            })\r\n            .then(response => {\r\n                this.EnableAlert(\"Concluido com sucesso.\", \"success\")\r\n                console.log(response)\r\n            })\r\n            .catch(error => {\r\n                this.EnableAlert(error.message, \"error\")\r\n                window.scrollTo(0,0);\r\n                console.log(error)\r\n            })\r\n            .finally(() => {\r\n                this.loader = !this.loader\r\n                this.requestBuscarPeriodoPorEmpresaId()\r\n            })\r\n        }\r\n    },\r\n    \r\n    created() {\r\n        this.requestBuscarPeriodoPorEmpresaId()\r\n    },\r\n}\r\n</script>\r\n<style>\r\n    \r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}