{"ast":null,"code":"import api from '@/services/api';\nimport LoadComponent from './LoadComponent.vue';\nexport default {\n  components: {\n    LoadComponent\n  },\n  name: 'AgendarComponent',\n  data: vm => ({\n    loader: false,\n    date: new Date(Date.now() - new Date().getTimezoneOffset() * 60000).toISOString().substring(0, 10),\n    dateFormat: vm.FormatDate(new Date(Date.now() - new Date().getTimezoneOffset() * 60000).toISOString().substring(0, 10)),\n    modal2: false,\n    time: null,\n    modal: false,\n    comemoracao: \"Não\",\n    descricao: null,\n    items: ['Sim', 'Não'],\n    periodo: ['Manhã', 'Tarde', \"Noite\"],\n    QuantidadePessoas: null,\n    requiredPeopleRules: [v => v != null && v != 0 || 'Campo Obrigatório.'],\n    requiredRules: [v => v != null || 'Campo Obrigatório.']\n  }),\n  methods: {\n    CalendarSave(date) {\n      this.$refs.dialog.save(this.FormatDate(date));\n      this.modal = false;\n    },\n    FormatDate(date) {\n      if (!date) return null;\n      console.log(this.date);\n      const [year, month, day] = date.split('-');\n      return `${day}/${month}/${year}`;\n    },\n    DesabilitarCampoDscricao() {\n      if (this.comemoracao != 'Sim') {\n        this.descricao = null;\n        return true;\n      }\n      return false;\n    },\n    Salvar() {\n      // this.$refs.form.validate()\n      // if (this.ValidarCampos() == false) return\n\n      this.loader = !this.loader;\n      api.post('Reserva', {\n        dataReserva: new Date().toISOString(),\n        dataCadastro: new Date().toISOString(),\n        horario: new Date().toISOString(),\n        periodo: 1,\n        empresaId: this.dadosEmpresa.id,\n        usuarioId: this.dadosUsuario.id,\n        ativo: true,\n        quantidadePessoas: this.QuantidadePessoas,\n        ehComemoracao: false,\n        descricaoComemoracao: ''\n      }).then(response => {\n        this.loader = !this.loader;\n        console.log(response);\n      }).catch(error => {\n        this.loader = !this.loader;\n        console.log(error);\n      });\n    },\n    ValidarCampos() {\n      if (this.time == null) return false;\n      if (this.QuantidadePessoas == null) return false;\n    }\n  },\n  // mounted() {\n  //     console.log(this.dadosUsuario)\n  //     console.log(this.dadosEmpresa)\n  // },\n  watch: {\n    date(val) {\n      this.dateFormat = this.FormatDate(this.date);\n    }\n  },\n  props: {\n    dadosEmpresa: Object,\n    dadosUsuario: Object\n  }\n};","map":{"version":3,"mappings":"AAmKA;AACA;AAEA;EAEAA;IAAAC;EAAA;EAEAC;EACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC,sBACAC,iDACA;IACAC,gBACAD;EAEA;EAEAE;IACAC;MACA;MACA;IACA;IACAC;MACA;MAEAC;MAEA;MACA;IACA;IACAC;MACA,+BACA;QACA;QACA;MACA;MAEA;IACA;IACAC;MACA;MACA;;MAEA;MAEAC,oBACA;QACAC;QACAC;QACAC;QACAd;QACAe;QACAC;QACAC;QACAC;QACAC;QACAC;MACA,GACAC;QACA;QACAb;MACA,GACAc;QACA;QACAd;MACA;IAEA;IACAe;MACA;MACA;IACA;EACA;EACA;EACA;EACA;EACA;EACAC;IACAhC;MACA;IACA;EACA;EACAiC;IACAC;IACAC;EACA;AACA","names":["components","LoadComponent","name","data","loader","date","dateFormat","modal2","time","modal","comemoracao","descricao","items","periodo","QuantidadePessoas","requiredPeopleRules","v","requiredRules","methods","CalendarSave","FormatDate","console","DesabilitarCampoDscricao","Salvar","api","dataReserva","dataCadastro","horario","empresaId","usuarioId","ativo","quantidadePessoas","ehComemoracao","descricaoComemoracao","then","catch","ValidarCampos","watch","props","dadosEmpresa","dadosUsuario"],"sourceRoot":"src/components","sources":["AgendarComponent.vue"],"sourcesContent":["<template>\r\n    <v-card class=\"pb-3\">\r\n        <v-card-title>\r\n            <v-row class=\"pl-5\">{{ dadosEmpresa.nome }}</v-row>\r\n            <v-row class=\"pr-6\">\r\n                <v-spacer></v-spacer>\r\n                <h6>Reservar</h6>\r\n            </v-row>\r\n            </v-card-title>\r\n        <form\r\n            ref=\"form\" \r\n            lazy-validation\r\n        >\r\n            <v-col\r\n                cols=\"12\"\r\n                sm=\"12\"\r\n                md=\"12\"\r\n                class=\"px-7 mb-n7\"\r\n            >\r\n                <v-dialog\r\n                    ref=\"dialog\"\r\n                    v-model=\"modal\"\r\n                    persistent\r\n                    width=\"290px\"\r\n                >\r\n                    <template v-slot:activator=\"{ on, attrs }\">\r\n                        <v-text-field\r\n                        v-model=\"dateFormat\"\r\n                        label=\"Data\"\r\n                        prepend-icon=\"mdi-calendar\"\r\n                        readonly\r\n                        v-bind=\"attrs\"\r\n                        v-on=\"on\"\r\n                        color=\"green\"\r\n                        ></v-text-field>\r\n                    </template>\r\n                    <v-date-picker\r\n                        v-model=\"date\"\r\n                        scrollable\r\n                        locale=\"pt-br\"\r\n                        required\r\n                        color=\"green\"\r\n                    >\r\n                        <v-spacer></v-spacer>\r\n                        <v-btn\r\n                            text\r\n                            @click=\"modal = false\"\r\n                        >\r\n                        Cancelar\r\n                        </v-btn>\r\n                        <v-btn\r\n                            text\r\n                            color=\"green\"\r\n                            @click=\"CalendarSave(dateFormat)\"\r\n                        >\r\n                        OK\r\n                        </v-btn>\r\n                    </v-date-picker>\r\n                </v-dialog>\r\n            </v-col>\r\n            <v-col\r\n                cols=\"12\"\r\n                sm=\"12\"\r\n                md=\"12\"\r\n                class=\"px-7 my-n5\"\r\n            >\r\n                <v-dialog\r\n                    ref=\"dialog\"\r\n                    v-model=\"modal2\"\r\n                    :return-value.sync=\"time\"\r\n                    persistent\r\n                    width=\"290px\"\r\n                >\r\n                    <template v-slot:activator=\"{ on, attrs }\">\r\n                    <v-text-field\r\n                        v-model=\"time\"\r\n                        label=\"Horário\"\r\n                        prepend-icon=\"mdi-clock-time-four-outline\"\r\n                        readonly\r\n                        v-bind=\"attrs\"\r\n                        v-on=\"on\"\r\n                        :rules=\"requiredRules\"\r\n                        color=\"green\"\r\n                    ></v-text-field>\r\n                    </template>\r\n                    <v-time-picker\r\n                        v-if=\"modal2\"\r\n                        v-model=\"time\"\r\n                        full-width\r\n                        format=\"24hr\"\r\n                        required\r\n                        color=\"green\"\r\n                    >\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn\r\n                        text\r\n                        @click=\"modal2 = false\"\r\n                    >\r\n                        Cancelar\r\n                    </v-btn>\r\n                    <v-btn\r\n                        text\r\n                        color=\"green\"\r\n                        @click=\"$refs.dialog.save(time)\"\r\n                    >\r\n                        OK\r\n                    </v-btn>\r\n                    </v-time-picker>\r\n                </v-dialog>\r\n            </v-col>\r\n            <v-select\r\n                :items=\"periodo\"\r\n                label=\"Periodo\"\r\n                prepend-icon=\"mdi-clock-time-eight\"\r\n                class=\"px-7\"\r\n                color=\"green\"\r\n            ></v-select>\r\n            <v-text-field\r\n                v-model=\"QuantidadePessoas\"\r\n                prepend-icon=\"mdi-account-plus\"\r\n                label=\"Quantidade Pessoas\"\r\n                class=\"px-7\"\r\n                required\r\n                type=\"number\"\r\n                pattern=\"\\d*\"\r\n                :rules=\"requiredPeopleRules\"\r\n                color=\"green\"\r\n            >\r\n            </v-text-field>\r\n            <v-select\r\n                v-model=\"comemoracao\"\r\n                :items=\"items\"\r\n                label=\"Comemoração\"\r\n                prepend-icon=\"mdi-party-popper\"\r\n                class=\"px-7\"\r\n                color=\"green\"\r\n            ></v-select>\r\n            <v-text-field\r\n                v-model=\"descricao\"\r\n                prepend-icon=\"mdi-message-arrow-right\"\r\n                label=\"Descrição\"\r\n                class=\"px-7\"\r\n                :disabled=\"DesabilitarCampoDscricao()\"\r\n                color=\"green\"\r\n            >\r\n            </v-text-field>\r\n            <v-row class=\"px-10 py-7\">\r\n                <v-btn\r\n                    outlined\r\n                    large\r\n                    block\r\n                    color=\"green\"\r\n                    @click=\"Salvar()\"\r\n                    >\r\n                    Confirmar\r\n                </v-btn>\r\n            </v-row>\r\n        </form>\r\n        <load-component :Ativo=\"loader\"/>\r\n    </v-card>\r\n</template>\r\n<script>\r\n\r\nimport api from '@/services/api'\r\nimport LoadComponent from './LoadComponent.vue'\r\n\r\nexport default {\r\n\r\n  components: { LoadComponent },\r\n\r\n    name: 'AgendarComponent',\r\n    data: vm => ({\r\n        loader: false,\r\n        date: (new Date(Date.now() - (new Date()).getTimezoneOffset() * 60000)).toISOString().substring(0, 10),\r\n        dateFormat : vm.FormatDate((new Date(Date.now() - (new Date()).getTimezoneOffset() * 60000)).toISOString().substring(0, 10)),\r\n        modal2: false,\r\n        time: null,\r\n        modal: false,\r\n        comemoracao: \"Não\",\r\n        descricao: null,\r\n        items: ['Sim', 'Não'],\r\n        periodo: ['Manhã', 'Tarde', \"Noite\"],\r\n        QuantidadePessoas: null,\r\n        requiredPeopleRules: [\r\n            v => v != null && v != 0 || 'Campo Obrigatório.'\r\n        ],\r\n        requiredRules: [\r\n            v => v != null || 'Campo Obrigatório.',\r\n        ]\r\n    }),\r\n\r\n    methods: {\r\n        CalendarSave(date) {\r\n            this.$refs.dialog.save(this.FormatDate(date))\r\n            this.modal = false\r\n        },\r\n        FormatDate(date) {\r\n            if (!date) return null\r\n\r\n            console.log(this.date)\r\n\r\n            const [year, month, day] = date.split('-')\r\n            return `${day}/${month}/${year}`\r\n        },\r\n        DesabilitarCampoDscricao() {\r\n            if(this.comemoracao != 'Sim')\r\n            {\r\n                this.descricao = null;\r\n                return true\r\n            }\r\n        \r\n            return false\r\n        },\r\n        Salvar() {\r\n            // this.$refs.form.validate()\r\n            // if (this.ValidarCampos() == false) return\r\n\r\n            this.loader = !this.loader;\r\n\r\n            api.post('Reserva', \r\n            {\r\n                dataReserva: new Date().toISOString(),\r\n                dataCadastro: new Date().toISOString(),\r\n                horario: new Date().toISOString(),\r\n                periodo: 1,\r\n                empresaId: this.dadosEmpresa.id,\r\n                usuarioId: this.dadosUsuario.id,\r\n                ativo: true,\r\n                quantidadePessoas: this.QuantidadePessoas,\r\n                ehComemoracao: false,\r\n                descricaoComemoracao: ''\r\n            })\r\n            .then(response => {\r\n                this.loader = !this.loader;\r\n                console.log(response)\r\n            })\r\n            .catch(error => {\r\n                this.loader = !this.loader;\r\n                console.log(error)\r\n            })\r\n\r\n        },\r\n        ValidarCampos() {\r\n            if (this.time == null) return false\r\n            if (this.QuantidadePessoas == null) return false\r\n        }\r\n    },\r\n    // mounted() {\r\n    //     console.log(this.dadosUsuario)\r\n    //     console.log(this.dadosEmpresa)\r\n    // },\r\n    watch: {\r\n      date (val) {\r\n        this.dateFormat = this.FormatDate(this.date)\r\n      },\r\n    },\r\n    props: {\r\n        dadosEmpresa: Object,\r\n        dadosUsuario: Object\r\n    }\r\n}\r\n</script>\r\n<style>\r\n    \r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}